# =============================================================================
# Database
# =============================================================================
# PostgreSQL is REQUIRED and must be running before starting the API server.
#
# For local development with Docker:
#   1. Run: docker compose up -d postgres
#   2. Connects automatically to postgres://test:test@localhost:5432/test
#   3. See docker-compose.yml for configuration details
#
# Connection string format: postgres://username:password@host:port/database
#
# NOTE: When running the API server from within Docker (e.g., docker compose up),
#       use 'postgres' as the hostname instead of 'localhost':
#       DATABASE_URL=postgres://test:test@postgres:5432/test
#
# DATABASE_URL vs TEST_DATABASE_URL:
#   - DATABASE_URL: Used by the API server at runtime (includes database name)
#   - TEST_DATABASE_URL: Used by tests to create/drop test databases (no database name)
#   - Tests need admin-level access to create unique databases per test
#   - Both use the same PostgreSQL server and credentials
#
# Example for local development (with docker compose up -d postgres):
DATABASE_URL=postgres://test:test@localhost:5432/test
# Example for production:
# DATABASE_URL=postgres://user:password@postgres.example.com:5432/production_db

# =============================================================================
# Test Database
# =============================================================================
# Used by tests for creating and managing test databases.
# Should NOT include a database name - tests connect to the server's admin database.
# Default: postgres://test:test@localhost:5432
# See api/src/database/test_helpers.rs for usage details.
TEST_DATABASE_URL=postgres://test:test@localhost:5432

# =============================================================================
# Frontend URL (required)
# =============================================================================
# Used for recovery links, email links, etc.
FRONTEND_URL=http://decent-cloud.org

# =============================================================================
# Payment Providers
# =============================================================================

# Stripe (optional - for credit card payments)
# Get keys from: https://dashboard.stripe.com/test/apikeys
#STRIPE_SECRET_KEY=sk_test_...
#STRIPE_PUBLISHABLE_KEY=pk_test_...
#STRIPE_WEBHOOK_SECRET=whsec_...

# ICPay (optional - for crypto payments)
# Get keys from: https://icpay.org
#ICPAY_SECRET_KEY=sk_test_...

# =============================================================================
# Email Service (optional)
# =============================================================================
# MailChannels - Get API key from: https://app.mailchannels.com/
#MAILCHANNELS_API_KEY=your_key

# DKIM signing (optional - improves deliverability)
#DKIM_DOMAIN=yourdomain.com
#DKIM_SELECTOR=mailchannels
#DKIM_PRIVATE_KEY=base64_encoded_private_key

# Processing config
#EMAIL_PROCESSOR_INTERVAL_SECS=30
#EMAIL_BATCH_SIZE=10

# =============================================================================
# SMS Notifications (optional)
# =============================================================================
# Configure ONE of the providers below
# Priority: TextBee (if configured) > Twilio (if configured)

# TextBee SMS (uses your Android phone as gateway)
# Get credentials from: https://textbee.dev or your self-hosted instance
#TEXTBEE_DEVICE_ID=your_device_id
#TEXTBEE_API_KEY=your_api_key
#TEXTBEE_API_URL=https://api.textbee.dev  # Optional: custom endpoint for self-hosted

# Twilio SMS (cloud service)
# Get credentials from: https://console.twilio.com/
#TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
#TWILIO_AUTH_TOKEN=your_auth_token
#TWILIO_PHONE_NUMBER=+15551234567

# =============================================================================
# Chatwoot Integration (required for support portal)
# =============================================================================
# Get these from your Chatwoot instance admin panel

# API connection
CHATWOOT_BASE_URL=https://chatwoot.yourdomain.com
CHATWOOT_API_TOKEN=your_agent_bot_access_token
CHATWOOT_ACCOUNT_ID=1

# Platform API (for user provisioning)
CHATWOOT_PLATFORM_API_TOKEN=your_platform_api_token

# Widget & dashboard links
CHATWOOT_FRONTEND_URL=https://chatwoot.yourdomain.com
CHATWOOT_INBOX_ID=1

# HMAC identity verification secret (from Inbox settings)
CHATWOOT_IDENTITY_TOKEN=your_hmac_secret
