# Development overrides - no tunnel, access via localhost only
# Deploy with: python3 deploy.py deploy dev
# Or export an environment variable: VITE_DECENT_CLOUD_API_URL=http://localhost:59001

x-api-base: &api-base
  volumes:
    - ../data/api-data-dev:/data
  networks:
    - decent-cloud-dev

services:
  website:
    container_name: decent-cloud-website-dev
    ports:
      - "59000:3000" # Dev: host 59000 -> container 3000
    networks:
      - decent-cloud-dev

  api-serve:
    <<: *api-base
    container_name: decent-cloud-api-serve-dev
    ports:
      - "59001:59001" # Dev: host 59001 -> container 59001

  api-sync:
    <<: *api-base
    container_name: decent-cloud-api-sync-dev

  api-validate:
    <<: *api-base
    container_name: decent-cloud-api-validate-dev
    # Validator disabled by default in dev, comment out to enable it
    profiles: ["validator"]

networks:
  decent-cloud-dev:
    driver: bridge
